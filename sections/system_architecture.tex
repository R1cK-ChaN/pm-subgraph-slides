\begin{frame}{Trading System Architecture Overview}
    \begin{center}
    \begin{tikzpicture}[node distance=1.8cm, scale=0.75, transform shape,
        layer/.style={rectangle, draw, fill=nus-blue!20, text width=3cm, text centered, rounded corners, minimum height=1.2cm, font=\small},
        oracle/.style={rectangle, draw, fill=nus-orange!30, text width=2.5cm, text centered, rounded corners, minimum height=1cm, font=\small},
        arrow/.style={thick,->,>=stealth}]

        % Data Layer (bottom)
        \node[layer] (data) {\textbf{Data Layer}\\ Subgraph + Gamma API\\ + External Feeds};

        % Signal Generation Layer
        \node[oracle, above left=1.2cm and 0.5cm of data] (slo) {\textbf{Semantic Logic\\ Oracle (SLO)}\\ News, metadata,\\ correlations};
        \node[oracle, above right=1.2cm and 0.5cm of data] (mbo) {\textbf{Market Behavior\\ Oracle (MBO)}\\ Prices, volume,\\ patterns};

        % Strategy Engine
        \node[layer, above=1.2cm of data, xshift=0cm] (strategy) {\textbf{Strategy Engine}\\ Rule-based + ML Models};

        % Risk Management
        \node[layer, above=1.2cm of strategy] (risk) {\textbf{Risk Management}\\ Position limits\\ Exposure tracking};

        % Execution
        \node[layer, above=1.2cm of risk] (exec) {\textbf{Execution Layer}\\ CLOB API Integration\\ On-chain transactions};

        % Arrows
        \draw[arrow] (data) -- (slo);
        \draw[arrow] (data) -- (mbo);
        \draw[arrow] (slo) -- (strategy);
        \draw[arrow] (mbo) -- (strategy);
        \draw[arrow] (strategy) -- (risk);
        \draw[arrow] (risk) -- (exec);

    \end{tikzpicture}
    \end{center}

    \vspace{0.2cm}

    \begin{block}{Key Components}
        \textbf{SLO:} Semantic signals (news, event logic) | \textbf{MBO:} Market signals (price, volume) | \textbf{Strategy:} Decision logic | \textbf{Risk:} Capital management | \textbf{Execution:} Trade placement
    \end{block}
\end{frame}

\begin{frame}{Component Details: Oracles \& Strategy}
    \begin{columns}[T]
        \begin{column}{0.48\textwidth}
            \begin{block}{Semantic Logic Oracle (SLO)}
                \footnotesize
                \textbf{Inputs:} Metadata, news, events

                \textbf{Outputs:} Market mappings, event signals, value estimates
            \end{block}

            \begin{exampleblock}{Example}
                \footnotesize
                News: ``X drops out'' $\rightarrow$ Sell ``X wins''
            \end{exampleblock}
        \end{column}

        \begin{column}{0.48\textwidth}
            \begin{block}{Market Behavior Oracle (MBO)}
                \footnotesize
                \textbf{Inputs:} Trade history, real-time prices, volume

                \textbf{Outputs:} Parity violations, momentum, volatility
            \end{block}

            \begin{exampleblock}{Example}
                \footnotesize
                Yes + No = \$1.15 $\rightarrow$ Parity arb
            \end{exampleblock}
        \end{column}
    \end{columns}

    \begin{alertblock}{Strategy Engine}
        \footnotesize
        SLO + MBO signals $\rightarrow$ Rules/ML models $\rightarrow$ Trade decisions
    \end{alertblock}
\end{frame}

\begin{frame}{Data Flow: From Subgraph to Execution}
    \begin{center}
    \begin{tikzpicture}[node distance=0.7cm, scale=0.65, transform shape,
        step/.style={rectangle, draw, fill=nus-blue!15, text width=2.2cm, align=center, rounded corners, minimum height=0.7cm, font=\tiny},
        data/.style={rectangle, draw, fill=nus-orange!20, text width=2cm, align=center, rounded corners, minimum height=0.7cm, font=\tiny},
        arrow/.style={thick,->,>=stealth}]

        % Row 1: Data sources
        \node[data] (sg) {Subgraph};
        \node[data, right=0.4cm of sg] (gamma) {Gamma API};
        \node[data, right=0.4cm of gamma] (clob) {CLOB API};
        \node[data, right=0.4cm of clob] (news) {News};

        % Row 2: Processing
        \node[step, below=0.8cm of sg, xshift=1.3cm] (ingest) {Ingestion};
        \node[step, below=0.8cm of news, xshift=-1.3cm] (enrich) {Feature Eng.};

        % Row 3: Analysis
        \node[step, below=0.8cm of ingest, xshift=1.3cm] (signal) {Signal Gen.\\ (SLO+MBO)};

        % Row 4: Decision
        \node[step, below=0.8cm of signal] (decide) {Strategy};

        % Row 5: Execution
        \node[step, below=0.8cm of decide] (exec) {Execute};

        % Arrows
        \draw[arrow] (sg) -- (ingest);
        \draw[arrow] (gamma) -- (ingest);
        \draw[arrow] (clob) -- (ingest);
        \draw[arrow] (news) -- (enrich);
        \draw[arrow] (ingest) -- (enrich);
        \draw[arrow] (enrich) -- (signal);
        \draw[arrow] (signal) -- (decide);
        \draw[arrow] (decide) -- (exec);
    \end{tikzpicture}
    \end{center}

    \begin{block}{Pipeline Modularity}
        \footnotesize
        Each component is developed and tested independently with clean interfaces
    \end{block}
\end{frame}

\begin{frame}{Backtesting \& Live Trading Modes}
    \begin{columns}[T]
        \begin{column}{0.48\textwidth}
            \begin{block}{Backtesting Mode}
                \footnotesize
                \textbf{Data:} Historical subgraph, archived news

                \textbf{Process:} Replay trades $\rightarrow$ Generate signals $\rightarrow$ Simulate execution

                \textbf{Benefits:} Risk-free testing, parameter optimization
            \end{block}
        \end{column}

        \begin{column}{0.48\textwidth}
            \begin{block}{Live Trading Mode}
                \footnotesize
                \textbf{Data:} Real-time CLOB, live news, subgraph

                \textbf{Process:} Monitor $\rightarrow$ Signal gen. $\rightarrow$ Risk check $\rightarrow$ Execute

                \textbf{Safeguards:} Position limits, circuit breakers
            \end{block}
        \end{column}
    \end{columns}

    \begin{alertblock}{Unified Codebase}
        \footnotesize
        Same strategy logic runs in both modes -- only data sources differ
    \end{alertblock}
\end{frame}
